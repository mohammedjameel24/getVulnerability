<!--COPYRIGHT MOHD JAMIL
    instagram:https://www.instagram.com/_mohdjamil
    linkedin:https://www.linkedin.com/in/mohd-jamil-35508a1b9
    github:https://www.github.com/mohdjameel2412
-->
<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <title>Cyber-Fraud-Detector</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link type="image/x-icon" rel="icon" href="https://drive.google.com/uc?id=1GXl9MScYaz5eA8YGIWzQz01B5P0ElJbW">
  <link rel="stylesheet" href="styles.css">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="628">
  <link rel="stylesheet" href="assets/css/main_v%3D1.0.15.css">
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
  <!-- Style for logout button -->
  <style>
    .w3-button {
      max-width: 100px;
    }
  </style>
  <!-- Style end-->
</head>

<body>

  <!-- Firebase Configurations
     https://firebase.google.com/docs/web/setup#available-libraries -->
  <script src="/__/firebase/8.2.5/firebase-app.js"></script>

  <script src="/__/firebase/8.2.5/firebase-analytics.js"></script>

  <!-- Initialize Firebase -->
  <script src="/__/firebase/init.js"></script>
  <!--Firebase configuration Ends-->


<!--Visualizer -->
  <main class="container">
    <div id="map" class="map">
      <div class="sf-hero-score" style="opacity: 1;">
        <div class="sf-hero-sphere">
          <div class="sf-hero-sphere-video">
            <video autoplay="autoplay" loop="loop" src="assets/video/1.mp4"></video>
            <div id="graph" class="sf-hero-sphere-video-overlay -color-2"></div>
          </div>
          <div class="sf-hero-sphere-description">
            <div class="sf-hero-sphere-label">Vulnerability</div>
            <div id="myBar" class="sf-hero-sphere-value">0%</div>
            <div class="sf-hero-sphere-info">
              Risk:<span id="Risk" class="sf-hero-sphere-info-val -medium">Medium</span>
            </div>
          </div>
          <div class="sf-hero-sphere-points-item -first" data-label="Technology score">
            <div class="sf-hero-sphere-points-circle">
              <span></span>
              <i id="osName" style="color: white;position: relative;left: 30px;">Technology</i>
            </div>
          </div>
          <div class="sf-hero-sphere-points-item -second" data-label="Technology score">
            <div class="sf-hero-sphere-points-circle">
              <span></span>
              <i id="platformModel"
                style="color: white;position: relative;right:10px;top: 30px;min-width: 100px;">Model</i>
            </div>
          </div>
          <div class="sf-hero-sphere-points-item -third" data-label="Technology score">
            <div class="sf-hero-sphere-points-circle">
              <span></span>
              <i id="platformName" style="color: white;position: relative;left: 10px;top: 30px;">Platform</i>
            </div>
          </div>
          <div class="sf-hero-sphere-points-item -fourth" data-label="Technology score">
            <div class="sf-hero-sphere-points-circle">
              <span></span>
              <i id="platformOs" style="color: white;position: relative; left:-30px;bottom: 20px;">OS</i>
            </div>
          </div>
          <div class="sf-hero-sphere-points-item -fifth" data-label="Technology score">
            <div class="sf-hero-sphere-points-circle">
              <span></span>
              <i id="browserVersion" style="color: white;position: relative;left: -10px;bottom: 20px;"></i>
            </div>
          </div>
        </div>
      </div>
      <!--Visualizer Ends-->
      <!--Logo and Logout button-->
      <p id="info" class="info">
        <img src="./globe.png" id="logo" class="info">
        <button id="logout" class="w3-btn w3-ripple w3-red">logout</button>
      </p>
      <!--Logo and Logout Ends-->  

    <!--Device info and Assets-->
      <div class="footer">

        <div id="device" class="device">
          <div class="current"><strong>Country: </strong><span id="country"></span></div>
          <div class="current"><strong>State: </strong><span id="state"></span></div>
          <div class="current"><strong>City: </strong><span id="city"></span></div>
          <div class="current"><strong>longitude: </strong><span id="longitude"></span></div>
          <div class="current"><strong>latitude: </strong><span id="latitude"></span></div>
          <div class="current"><strong>IP: </strong><span id="ip">223.225.242.239</span></div>
          <br>
          <div class="device"><b>OS Version : </b><span id="osVersion"></span></div>
          <div class="device"><b>Browser : </b><span id="browserName"></span></div>
          <div class="device"><b>Device Vendor : </b><span id="deviceVendor"></span></div>
          <div class="device"><b>Device Type : </b><span id="deviceType"></span></div>
          <br>
          <br>
          <br>
          <br>
          <!--
          <div class="device"><b>OS : </b><span id="osName"></span></div>

          <div class="device"><b>Browser Version : </b><span id="browserVersion"></span></div>
          <div class="device"><b>Device Model : </b><span id="deviceModel"></span></div>
          <div class="device"><b>Device Type : </b><span id="deviceType"></span></div>
          <br>
        -->
        </div>
        <!--device info Assets Ends-->
      </div>
    </div>
  </main>
  <!--Date Time javascript-->
  <script src="./index.js"></script>
  <script src="./script.js"></script>
  <!--device detection script Ends-->
  <!--location jQuery-->
  <script>
    $.ajax({
      url: "https://geolocation-db.com/jsonp",
      jsonpCallback: "callback",
      dataType: "jsonp",
      success: function (location) {
        $('#country').html(location.country_name);
        $('#state').html(location.state);
        $('#city').html(location.city);
        $('#latitude').html(location.latitude);
        $('#longitude').html(location.longitude);
        $('#ip').html(location.IPv4);
      }
    });

  </script>
  <!--location jQuery Ends-->
  <!--UAparser-->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/UAParser.js/0.7.19/ua-parser.min.js"></script>

  <script>
    var ua = new UAParser();
    var result = ua.getResult().device;
    console.log(result);

    //result.vendor

    var Type = result.type;
    if (Type == "mobile" || Type =="tablet"){
      document.getElementById('deviceType').innerHTML = Type;
    }
    else {
      document.getElementById('deviceType').innerHTML = "Desktop/Laptop";
    }
  </script>
  <!--
  document.getElementById('deviceModel').innerHTML = result.model ;

-->

  <script src="https://cdnjs.cloudflare.com/ajax/libs/platform/1.3.6/platform.min.js"></script>
  <script>
    document.getElementById('platformModel').innerHTML = platform.product;
    document.getElementById('platformName').innerHTML = platform.name;
    document.getElementById('platformOs').innerHTML = platform.os;

    var model = document.getElementById('platformModel').innerHTML ;

    if (model == ""){
      document.getElementById('platformModel').innerHTML = 'PC';
    }
    else {
      model = platform.product;
    }
    var str = platform.product ;
    
    if(str == null){
      document.getElementById('deviceVendor').innerHTML = "microsoft";
    }else if (str.startsWith('Redmi') == true){
      document.getElementById('deviceVendor').innerHTML = "Xiaomi";
    }
    //add else if condition for your device As shown above ,if it dosent detect Vendor/Manufacturer

    else if(str.startsWith('Mi') == true){
      document.getElementById('deviceVendor').innerHTML = "Xiaomi";
    }
    else if(str.startsWith('RMX') == true){
      document.getElementById('deviceVendor').innerHTML = "Realme";
    }
    else{
      document.getElementById('deviceVendor').innerHTML = result.vendor;
      
    }
  </script>

  <!-- The core Firebase JS SDK is always required and must be listed first -->
  <script src="https://www.gstatic.com/firebasejs/8.0.1/firebase-app.js"></script>

  <script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-database.js"></script>
  <script>
    // Your web app's Firebase configuration
    var firebaseConfig = {
      apiKey: "",
      authDomain: "",
      projectId: "",
      storageBucket: "",
      messagingSenderId: "",
      appId: "",
      measurementId: ""
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    //-------------------------------------Authentication------------------------------//

    //---------------------------------Real Time Database------------------------------------//

    document.getElementById('logout').addEventListener('click', LogoutUser)

    let provider = new firebase.auth.GoogleAuthProvider()

    function checkAuthState() {
      firebase.auth().onAuthStateChanged(user => {
        if (user) {
          move();
          setTimeout(
            function(){
              Ready(),
              firebase.database().ref('data/' + datetime).set({
                longitude,
                latitude,
                country,
                ip,
                state,
                city,
                osName,
                osVersion,
                browserName,
                browserVersion,
                deviceVendor,
                platformName,
                platformOs,
                platformodel,
                devicetype,
                vulnerability,
                datetime,
                
              })},10000);
            
            
          } else {
          window.location = "index.html"


        }
      })
    }
    checkAuthState()

    function LogoutUser() {
      console.log('Logout Btn Call')
      firebase.auth().signOut().then(() => {
        window.location = 'index.html';
        alert("logged out");


      }).catch(e => {
        console.log(e)
      })
    }
    //--------------------------------------RealTime Database-------------------------------------------//
    var i = document.getElementById('osVersion').innerHTML;


    function move() {
      if (i <= 10 && i >= 9) {
        i = 1;
        var elem = document.getElementById("myBar");
        var width = 0;
        var id = setInterval(frame, 5);
        function frame() {
          if (width >= 40) {
            clearInterval(id);
            i = 0;
            document.getElementById('graph').className = "sf-hero-sphere-video-overlay -color-5";
            document.getElementById('Risk').innerHTML = "Low"
            document.getElementById('Risk').className = "sf-hero-sphere-info-val -low";

          } else {
            width++;
            elem.style.width = width + "%";
            elem.innerHTML = width + "%";
          }
        }
      }
      else if (i <= 9 && i >= 8) {
        i = 1;
        var elem = document.getElementById("myBar");
        var width = 20;
        var id = setInterval(frame, 10);
        function frame() {
          if (width >= 50) {
            clearInterval(id);
            i = 0;
            document.getElementById('graph').className = "sf-hero-sphere-video-overlay -color-4";
          } else {
            width++;
            elem.style.width = width + "%";
            elem.innerHTML = width + "%";
          }
        }
      }
      else if (i <= 7 && i >= 6) {
        i = 1;
        var elem = document.getElementById("myBar");
        var width = 20;
        var id = setInterval(frame, 10);
        function frame() {
          if (width >= 70) {
            clearInterval(id);
            i = 0;
            document.getElementById('graph').className = "sf-hero-sphere-video-overlay -color-3";
          } else {
            width++;
            elem.style.width = width + "%";
            elem.innerHTML = width + "%";
          }
        }
      }
      else if (i <= 5 && i >= 4) {
        i = 1;
        var elem = document.getElementById("myBar");
        var width = 20;
        var id = setInterval(frame, 10);
        function frame() {
          if (width >= 80) {
            clearInterval(id);
            i = 0;
            document.getElementById('graph').className = "sf-hero-sphere-video-overlay -color-2";
          } else {
            width++;
            elem.style.width = width + "%";
            elem.innerHTML = width + "%";
          }
        }
      }
      else if (i < 3) {
        i = 1;
        var elem = document.getElementById("myBar");
        var width = 20;
        var id = setInterval(frame, 10);
        function frame() {
          if (width >= 99) {
            clearInterval(id);
            i = 0;
            document.getElementById('graph').className = "sf-hero-sphere-video-overlay -color-1";
            document.getElementById('Risk').innerHTML = "High"
            document.getElementById('Risk').className = "sf-hero-sphere-info-val -very-high";
          } else {
            width++;
            elem.width = width + "%";
            elem.innerHTML = width + "%";
          }
        }
      }
    }
    var longitude,latitude,country,state,city,ip,datetime,deviceVendor,osName,osVersion,browserName,browserVersion,platformName,platformodel,platformOs,vulnerability;

    function Ready() {
      longitude = document.getElementById('longitude').innerHTML;
      latitude = document.getElementById('latitude').innerHTML;
      country = document.getElementById('country').innerHTML;
      state = document.getElementById('state').innerHTML;
      city = document.getElementById('city').innerHTML;
      ip = document.getElementById('ip').innerHTML;
      datetime = moment().format('lll');
      deviceVendor = document.getElementById('deviceVendor').innerHTML;
      osName = document.getElementById('osName').innerHTML;
      osVersion = document.getElementById('osVersion').innerHTML;
      browserName = document.getElementById('browserName').innerHTML;
      browserVersion = document.getElementById('browserVersion').innerHTML;
      platformName = document.getElementById('platformName').innerHTML;
      platformodel = document.getElementById('platformModel').innerHTML;
      platformOs = document.getElementById('platformOs').innerHTML;
      devicetype = document.getElementById('deviceType').innerHTML;
      vulnerability = document.getElementById('myBar').innerHTML;

    }
  </script>
</body>

</html>
